const mainNav=document.querySelector(".main-nav"),surahsContainer=document.querySelector(".surahs .container"),loader=document.querySelector(".loader"),surahPage=document.querySelector(".surah-page"),versesContainer=document.querySelector(".verses"),audioEl=document.querySelector(".audio"),getSurahs=async()=>{const a=await fetch("https://api.quran.sutanlab.id/surah/");showLoader();const e=await a.json(),s=await e.data;showSurahs(s),hideLoader()};getSurahs();const showSurahs=a=>{for(let e in a)surahsContainer.innerHTML+=`<div class="surah flex shadow" onclick="showSurah(${a[e].number})">\n             <p class="number">${a[e].number}</p>\n             <div>\n              <h3 class="name">${a[e].name.transliteration.id}</h3>\n               <p class="desc text-gray">${a[e].name.translation.id} â€¢ ${a[e].numberOfVerses} ayat</p>\n             </div>\n           </div>`},showSurah=a=>{showLoader(),fetch(`https://api.quran.sutanlab.id/surah/${a}`).then(a=>a.json()).then(a=>{getSurah(a.data),hideLoader()}),surahPage.classList.add("active")},getSurah=a=>{let e;for(document.body.style.overflowY="hidden",mainNav.innerHTML=`\n         <li onclick="closeSurah()"><i class="far fa-chevron-left"></i></li>\n         <li class="logo">${a.name.transliteration.id}</li>\n         <li class="far fa-play toggle" onclick="toggleAudios(this)" data-number="${a.number}"></li>\n         `,e=1===a.number?1:0;e<a.verses.length;e++)versesContainer.innerHTML+=`<ul class="verse">\n         <li class="arab">${a.verses[e].text.arab}</li>\n         <li class="latin">${a.verses[e].number.inSurah}. ${a.verses[e].text.transliteration.en}</li>\n         <li class="means text-gray">${a.verses[e].translation.id}</li>\n         <li class="far fa-play toggle" onclick="toggleAudio(this)" data-audio="${a.verses[e].audio.primary}"></li>\n       </ul>`},toggleAudio=a=>{changeAudioToggles();let e=a.getAttribute("data-audio");a.classList.toggle("play"),audioEl.src=e,a.classList.contains("play")?(a.classList.replace("fa-play","fa-stop"),audioEl.play()):(a.classList.replace("fa-stop","fa-play"),audioEl.pause()),audioEl.onended=(()=>{a.classList.replace("fa-stop","fa-play")})},toggleAudios=a=>{changeAudioToggles();let e=a.getAttribute("data-number");a.classList.toggle("play"),fetch(`https://api.quran.sutanlab.id/surah/${e}`).then(a=>a.json()).then(e=>{playAudios(e.data.verses,a)})},playAudios=(a,e)=>{let s=1;audioEl.src=a[0].audio.primary,e.classList.contains("play")?(audioEl.play(),e.classList.replace("fa-play","fa-stop")):(audioEl.pause(),e.classList.replace("fa-stop","fa-play")),audioEl.onended=(()=>{e.classList.replace("fa-stop","fa-play"),audioEl.src=a[s++].audio.primary,audioEl.play(),e.classList.replace("fa-play","fa-stop")})},closeSurah=()=>{document.body.style.overflowY="auto",surahPage.classList.remove("active"),mainNav.innerHTML='<li class="logo">Quranible</li>',setTimeout(()=>{versesContainer.innerHTML=""},500)},changeAudioToggles=()=>{document.querySelectorAll(".toggle").forEach(a=>{a.classList.replace("fa-stop","fa-play")})},showLoader=()=>{loader.classList.add("active")},hideLoader=()=>{loader.classList.remove("active")};