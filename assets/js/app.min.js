<<<<<<< HEAD
const mainNav=document.querySelector(".main-nav"),sidebar=document.querySelector(".sidebar"),surahsContainer=document.querySelector(".surahs .container"),dailyPrayerContainer=document.querySelector(".daily-prayer-page .container"),loader=document.querySelector(".loader"),surahPage=document.querySelector(".surah-page"),dailyPrayerPage=document.querySelector(".daily-prayer-page"),adzanPage=document.querySelector(".adzan-page"),timeListContainer=adzanPage.querySelector(".time-list"),versesContainer=document.querySelector(".verses"),audioEl=document.querySelector(".audio"),themeToggle=document.querySelector(".check-toggle"),footer=document.querySelector("footer"),offlineSection=document.querySelector(".offline"),sidebarLinks=sidebar.querySelectorAll(".link");"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/serviceWorker.js").then(()=>console.log("Service worker registered")).catch(a=>console.log("Service worker not registered",a))}),sidebarLinks.forEach((a,b)=>{0!==b&&(1===b?a.addEventListener("click",async()=>{dailyPrayerPage.classList.add("active"),sidebar.classList.remove("active"),showLoader();const a=await fetch("https://api.jsonbin.io/b/61b7de1662ed886f915faabc"),b=await a.json(),c=await b;showDailyPrayer(c),hideLoader()}):a.addEventListener("click",async()=>{adzanPage.classList.add("active"),sidebar.classList.remove("active"),showLoader(),getLatLong()}))});const getLatLong=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(getElevation,getLatLongError):alert("Geolocation is not supported by this browser.")},getLatLongError=a=>{const b=adzanPage.querySelector("header");switch(a.code){case a.PERMISSION_DENIED:b.innerHTML=`<h1 class="fs-medium">An error occured</h1>
      <p>Allow this site to access your location and reload.</p>`;break;case a.POSITION_UNAVAILABLE:b.innerHTML=`<h1 class="fs-medium">An error occured</h1>
      <p>Location information is unavailable.</p>`;break;case a.TIMEOUT:b.innerHTML=`<h1 class="fs-medium">An error occured</h1>
      <p>Request timed out.</p>`;break;case a.UNKNOWN_ERROR:b.innerHTML=`<h1 class="fs-medium">An error occured</h1>
      <p>An unknown error occurred.</p>`;}hideLoader()},getAdzan=async a=>{const b=new Date().toLocaleDateString("en-CA");showLoader();const c=await fetch(`https://api.pray.zone/v2/times/day.json?longitude=${a.longitude}&latitude=${a.latitude}&elevation=${a.elevation}&date=${b}`),d=await c.json(),e=await d;showAdzan(e.results),hideLoader()},getElevation=async a=>{let b=a.coords.latitude,c=a.coords.longitude;const d=await fetch(`https://api.open-elevation.com/api/v1/lookup?locations=${b},${c}`),e=await d.json(),f=await e;getAdzan(f.results[0])},showAdzan=a=>{const b={name:adzanPage.querySelector(".name"),time:adzanPage.querySelector(".time"),timeIcon:adzanPage.querySelector(".time-icon"),date:adzanPage.querySelector(".date")};document.body.style.overflowY="hidden",mainNav.innerHTML=`
  <li onclick="closePage()"><a href="#0" class="far fa-chevron-left text-white"></a></li>
  <li class="logo"><i class="far fa-map-marker-alt"></i> ${a.location.timezone}</li>
  `;const c={shubuh:{name:"Shubuh",time:a.datetime[0].times.Fajr,icon:"fa-sunrise"},dhuhr:{name:"Dzuhur",time:a.datetime[0].times.Dhuhr,icon:"fa-sun"},ashar:{name:"Ashar",time:a.datetime[0].times.Asr,icon:"fa-sun"},maghrib:{name:"Maghrib",time:a.datetime[0].times.Maghrib,icon:"fa-sunset"},isya:{name:"Isya",time:a.datetime[0].times.Isha,icon:"fa-moon"}},d=c.shubuh.time,e=c.dhuhr.time,f=c.ashar.time,g=c.maghrib.time,h=c.isya.time,i=new Date,j=`${i.toLocaleString("it-IT",{hour:"2-digit",minute:"2-digit"})}`;j>d&&j<e&&(b.name.innerText=c.dhuhr.name,b.timeIcon.classList.add(c.dhuhr.icon),b.time.innerText=e),j>e&&j<f&&(b.name.innerText=c.ashar.name,b.timeIcon.classList.add(c.ashar.icon),b.time.innerText=f),j>f&&j<g&&(b.name.innerText=c.maghrib.name,b.timeIcon.classList.add(c.maghrib.icon),b.time.innerText=g),j>g&&j<h&&(b.name.innerText=c.isya.name,b.timeIcon.classList.add(c.isya.icon),b.time.innerText=h),(j>h||j<d)&&(b.name.innerText=c.shubuh.name,b.timeIcon.classList.add(c.shubuh.icon),b.time.innerText=d),b.date.innerText=i.toLocaleString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"});const k=document.querySelector(".time-list"),l=Object.values(c);l.forEach(a=>{k.innerHTML+=`<div class="card flex align-center between shadow">
    <span class="flex align-center">
       <i class="far fa-fw ${a.icon}"></i>
       <p class="name">${a.name}</p>
    </span>
    <p class="time">${a.time}</p>
 </div>`})},showDailyPrayer=a=>{document.body.style.overflowY="hidden",mainNav.innerHTML=`
  <li onclick="closePage()"><a href="#0" class="far fa-chevron-left text-white"></a></li>
  <li class="logo">Doa-Doa Harian</li>
  `,a.forEach(a=>{dailyPrayerContainer.innerHTML+=`<div class="card shadow">
    <h2 class="name">${a.doa}</h2>
    <p class="arab">${a.ayat}</p>
    <p class="latin">${a.latin}</p>
    <p class="means">${a.artinya}</p>
 </div>`})};window.addEventListener("offline",()=>{offlineSection.style.display=navigator.onLine?"none":"grid"}),window.addEventListener("hashchange",a=>{a.oldURL.length>a.newURL.length&&closePage()});let darkTheme=!1;const currentTheme=localStorage.getItem("theme")?localStorage.getItem("theme"):null;if(currentTheme&&(document.documentElement.setAttribute("data-theme",currentTheme),"dark"===currentTheme)){const a=themeToggle.previousElementSibling;themeToggle.checked=!0,a.classList.replace("fa-moon","fa-sun"),darkTheme=!0}const getSurahs=async()=>{const a=await fetch(`https://api.quran.sutanlab.id/surah/`);showLoader();const b=await a.json(),c=await b.data;showSurahs(c),hideLoader()};getSurahs();const showSurahs=a=>{for(let b in a)surahsContainer.innerHTML+=`<a href="#${a[b].name.transliteration.id.toLowerCase()}" class="surah flex shadow" onclick="showSurah(${a[b].number})">
             <p class="number">${a[b].number}</p>
             <div>
              <h3 class="name">${a[b].name.transliteration.id}</h3>
               <p class="desc text-gray">${a[b].name.translation.id} â€¢ ${a[b].numberOfVerses} ayat</p>
             </div>
           </a>`},showSurah=a=>{showLoader(),fetch(`https://api.quran.sutanlab.id/surah/${a}`).then(a=>a.json()).then(a=>{getSurah(a.data),hideLoader()}),surahPage.classList.add("active")},getSurah=a=>{document.body.style.overflowY="hidden",mainNav.innerHTML=`
         <li onclick="closePage()"><a href="#0" class="far fa-chevron-left text-white"></a></li>
         <li class="logo">${a.name.transliteration.id}</li>
         <li class="far fa-play toggle" onclick="toggleAudios(this)" data-number="${a.number}"></li>
         `;let b;for(b=1===a.number?1:0,b;b<a.verses.length;b++)versesContainer.innerHTML+=`<ul class="verse">
         <li class="arab">${a.verses[b].text.arab}</li>
         <li class="latin">${a.verses[b].number.inSurah}. ${a.verses[b].text.transliteration.en}</li>
         <li class="means text-gray">${a.verses[b].translation.id}</li>
         <li class="far fa-play toggle" onclick="toggleAudio(this)" data-audio="${a.verses[b].audio.primary}"></li>
       </ul>`},toggleAudio=a=>{changeAudioToggles();let b=a.getAttribute("data-audio");a.classList.toggle("play"),audioEl.src=b,a.classList.contains("play")?(a.classList.replace("fa-play","fa-stop"),audioEl.play()):(a.classList.replace("fa-stop","fa-play"),audioEl.pause()),audioEl.onended=()=>{a.classList.replace("fa-stop","fa-play")}},toggleAudios=a=>{changeAudioToggles();let b=a.getAttribute("data-number");a.classList.toggle("play"),fetch(`https://api.quran.sutanlab.id/surah/${b}`).then(a=>a.json()).then(b=>{playAudios(b.data.verses,a)})},playAudios=(a,b)=>{let c=1;audioEl.src=a[0].audio.primary,b.classList.contains("play")?(audioEl.play(),b.classList.replace("fa-play","fa-stop")):(audioEl.pause(),b.classList.replace("fa-stop","fa-play")),audioEl.onended=()=>{b.classList.replace("fa-stop","fa-play"),audioEl.src=a[c++].audio.primary,audioEl.play(),b.classList.replace("fa-play","fa-stop")}},closePage=()=>{document.body.style.overflowY="auto";const a=document.querySelectorAll(".page");a.forEach(a=>{a.classList.remove("active")}),mainNav.innerHTML=`<li class="menu toggle" onclick="showSidebar()"><i class="far fa-bars"></i></li>
  <li class="logo">Quranible</li>
  <li class="theme-toggle">
  <label for="check-toggle" class="far ${!0===darkTheme?"fa-sun":"fa-moon"} toggle"></label>
  <input type="checkbox" class="check-toggle" id="check-toggle" onchange="setTheme(this)">
  </li>`,setTimeout(()=>{versesContainer.innerHTML="",dailyPrayerContainer.innerHTML="",timeListContainer.innerHTML=""},500)},changeAudioToggles=()=>{const a=document.querySelectorAll(".toggle");a.forEach(a=>{a.classList.replace("fa-stop","fa-play")})},setTheme=a=>{const b=a.previousElementSibling;a.checked?(b.classList.replace("fa-moon","fa-sun"),darkTheme=!0,document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(b.classList.replace("fa-sun","fa-moon"),darkTheme=!1,document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"))},showSidebar=()=>{sidebar.classList.toggle("active")},showLoader=()=>{loader.classList.add("active")},hideLoader=()=>{loader.classList.remove("active")};
=======
const mainNav=document.querySelector(".main-nav"),sidebar=document.querySelector(".sidebar"),surahsContainer=document.querySelector(".surahs .container"),dailyPrayerContainer=document.querySelector(".daily-prayer-page .container"),loader=document.querySelector(".loader"),surahPage=document.querySelector(".surah-page"),dailyPrayerPage=document.querySelector(".daily-prayer-page"),adzanPage=document.querySelector(".adzan-page"),timeListContainer=adzanPage.querySelector(".time-list"),versesContainer=document.querySelector(".verses"),audioEl=document.querySelector(".audio"),themeToggle=document.querySelector(".check-toggle"),footer=document.querySelector("footer"),offlineSection=document.querySelector(".offline"),sidebarLinks=sidebar.querySelectorAll(".link");"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("/serviceWorker.js").then(()=>console.log("Service worker registered")).catch(e=>console.log("Service worker not registered",e))}),sidebarLinks.forEach((e,a)=>{0!==a&&(1===a?e.addEventListener("click",async()=>{dailyPrayerPage.classList.add("active"),sidebar.classList.remove("active"),showLoader();const e=await fetch("https://api.jsonbin.io/b/61b7de1662ed886f915faabc"),a=await e.json(),t=await a;showDailyPrayer(t),hideLoader()}):e.addEventListener("click",async()=>{adzanPage.classList.add("active"),sidebar.classList.remove("active"),showLoader();const e=await fetch("https://api.techniknews.net/ipgeo/"),a=await e.json(),t=await a;getAdzan(t.city),hideLoader()}))});const getAdzan=async e=>{const a=(new Date).toLocaleDateString("en-CA"),t=await fetch(`https://api.pray.zone/v2/times/day.json?city=${e}&date=${a}&timeformat=1`),n=await t.json(),i=await n;showAdzan(i.results)},showAdzan=e=>{const a={name:adzanPage.querySelector(".name"),time:adzanPage.querySelector(".time"),timeIcon:adzanPage.querySelector(".time-icon"),date:adzanPage.querySelector(".date")};document.body.style.overflowY="hidden",mainNav.innerHTML=`\n  <li onclick="closePage()"><a href="#0" class="far fa-chevron-left text-white"></a></li>\n  <li class="logo"><i class="far fa-map-marker-alt"></i> ${e.location.city}, ${e.location.country_code}</li>\n  `;const t={shubuh:{name:"Shubuh",time:e.datetime[0].times.Fajr,icon:"fa-sunrise"},dhuhr:{name:"Dzuhur",time:e.datetime[0].times.Dhuhr,icon:"fa-sun"},ashar:{name:"Ashar",time:e.datetime[0].times.Asr,icon:"fa-sun"},maghrib:{name:"Maghrib",time:e.datetime[0].times.Maghrib,icon:"fa-sunset"},isya:{name:"Isya",time:e.datetime[0].times.Isha,icon:"fa-moon"}},n=t.shubuh.time,i=t.dhuhr.time,s=t.ashar.time,r=t.maghrib.time,o=t.isya.time,l=new Date,c=`${l.toLocaleString("it-IT",{hour:"2-digit",minute:"2-digit"})}`;c>n&&c<i&&(a.name.innerText=t.dhuhr.name,a.timeIcon.classList.add(t.dhuhr.icon),a.time.innerText=i),c>i&&c<s&&(a.name.innerText=t.ashar.name,a.timeIcon.classList.add(t.ashar.icon),a.time.innerText=s),c>s&&c<r&&(a.name.innerText=t.maghrib.name,a.timeIcon.classList.add(t.maghrib.icon),a.time.innerText=r),c>r&&c<o&&(a.name.innerText=t.isya.name,a.timeIcon.classList.add(t.isya.icon),a.time.innerText=o),(c>o||c<n)&&(a.name.innerText=t.shubuh.name,a.timeIcon.classList.add(t.shubuh.icon),a.time.innerText=n,a.date.innerText=l.toLocaleString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"}));const d=document.querySelector(".time-list");Object.values(t).forEach(e=>{d.innerHTML+=`<div class="card flex align-center between shadow">\n    <span class="flex align-center">\n       <i class="far fa-fw ${e.icon}"></i>\n       <p class="name">${e.name}</p>\n    </span>\n    <p class="time">${e.time}</p>\n </div>`})},showDailyPrayer=e=>{document.body.style.overflowY="hidden",mainNav.innerHTML='\n  <li onclick="closePage()"><a href="#0" class="far fa-chevron-left text-white"></a></li>\n  <li class="logo">Doa-Doa Harian</li>\n  ',e.forEach(e=>{dailyPrayerContainer.innerHTML+=`<div class="card shadow">\n    <h2 class="name">${e.doa}</h2>\n    <p class="arab">${e.ayat}</p>\n    <p class="latin">${e.latin}</p>\n    <p class="means">${e.artinya}</p>\n </div>`})};window.addEventListener("offline",()=>{offlineSection.style.display=navigator.onLine?"none":"grid"}),window.addEventListener("hashchange",e=>{e.oldURL.length>e.newURL.length&&closePage()});let darkTheme=!1;const currentTheme=localStorage.getItem("theme")?localStorage.getItem("theme"):null;if(currentTheme&&(document.documentElement.setAttribute("data-theme",currentTheme),"dark"===currentTheme)){const e=themeToggle.previousElementSibling;themeToggle.checked=!0,e.classList.replace("fa-moon","fa-sun"),darkTheme=!0}const getSurahs=async()=>{const e=await fetch("https://api.quran.sutanlab.id/surah/");showLoader();const a=await e.json(),t=await a.data;showSurahs(t),hideLoader()};getSurahs();const showSurahs=e=>{for(let a in e)surahsContainer.innerHTML+=`<a href="#${e[a].name.transliteration.id.toLowerCase()}" class="surah flex shadow" onclick="showSurah(${e[a].number})">\n             <p class="number">${e[a].number}</p>\n             <div>\n              <h3 class="name">${e[a].name.transliteration.id}</h3>\n               <p class="desc text-gray">${e[a].name.translation.id} â€¢ ${e[a].numberOfVerses} ayat</p>\n             </div>\n           </a>`},showSurah=e=>{showLoader(),fetch(`https://api.quran.sutanlab.id/surah/${e}`).then(e=>e.json()).then(e=>{getSurah(e.data),hideLoader()}),surahPage.classList.add("active")},getSurah=e=>{let a;for(document.body.style.overflowY="hidden",mainNav.innerHTML=`\n         <li onclick="closePage()"><a href="#0" class="far fa-chevron-left text-white"></a></li>\n         <li class="logo">${e.name.transliteration.id}</li>\n         <li class="far fa-play toggle" onclick="toggleAudios(this)" data-number="${e.number}"></li>\n         `,a=1===e.number?1:0;a<e.verses.length;a++)versesContainer.innerHTML+=`<ul class="verse">\n         <li class="arab">${e.verses[a].text.arab}</li>\n         <li class="latin">${e.verses[a].number.inSurah}. ${e.verses[a].text.transliteration.en}</li>\n         <li class="means text-gray">${e.verses[a].translation.id}</li>\n         <li class="far fa-play toggle" onclick="toggleAudio(this)" data-audio="${e.verses[a].audio.primary}"></li>\n       </ul>`},toggleAudio=e=>{changeAudioToggles();let a=e.getAttribute("data-audio");e.classList.toggle("play"),audioEl.src=a,e.classList.contains("play")?(e.classList.replace("fa-play","fa-stop"),audioEl.play()):(e.classList.replace("fa-stop","fa-play"),audioEl.pause()),audioEl.onended=(()=>{e.classList.replace("fa-stop","fa-play")})},toggleAudios=e=>{changeAudioToggles();let a=e.getAttribute("data-number");e.classList.toggle("play"),fetch(`https://api.quran.sutanlab.id/surah/${a}`).then(e=>e.json()).then(a=>{playAudios(a.data.verses,e)})},playAudios=(e,a)=>{let t=1;audioEl.src=e[0].audio.primary,a.classList.contains("play")?(audioEl.play(),a.classList.replace("fa-play","fa-stop")):(audioEl.pause(),a.classList.replace("fa-stop","fa-play")),audioEl.onended=(()=>{a.classList.replace("fa-stop","fa-play"),audioEl.src=e[t++].audio.primary,audioEl.play(),a.classList.replace("fa-play","fa-stop")})},closePage=()=>{document.body.style.overflowY="auto",document.querySelectorAll(".page").forEach(e=>{e.classList.remove("active")}),mainNav.innerHTML=`<li class="menu toggle" onclick="showSidebar()"><i class="far fa-bars"></i></li>\n  <li class="logo">Quranible</li>\n  <li class="theme-toggle">\n  <label for="check-toggle" class="far ${!0===darkTheme?"fa-sun":"fa-moon"} toggle"></label>\n  <input type="checkbox" class="check-toggle" id="check-toggle" onchange="setTheme(this)">\n  </li>`,setTimeout(()=>{versesContainer.innerHTML="",dailyPrayerContainer.innerHTML="",timeListContainer.innerHTML=""},500)},changeAudioToggles=()=>{document.querySelectorAll(".toggle").forEach(e=>{e.classList.replace("fa-stop","fa-play")})},setTheme=e=>{const a=e.previousElementSibling;e.checked?(a.classList.replace("fa-moon","fa-sun"),darkTheme=!0,document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(a.classList.replace("fa-sun","fa-moon"),darkTheme=!1,document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"))},showSidebar=()=>{sidebar.classList.toggle("active")},showLoader=()=>{loader.classList.add("active")},hideLoader=()=>{loader.classList.remove("active")};
>>>>>>> ffe96bf446e83a87405a743e9c51da8c804d2bab
