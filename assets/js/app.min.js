const mainNav=document.querySelector(".main-nav"),surahsContainer=document.querySelector(".surahs .container"),loader=document.querySelector(".loader"),surahPage=document.querySelector(".surah-page"),versesContainer=document.querySelector(".verses"),audioEl=document.querySelector(".audio"),themeToggle=document.querySelector(".check-toggle");let darkTheme=!1;const currentTheme=localStorage.getItem("theme")?localStorage.getItem("theme"):null;if(currentTheme&&(document.documentElement.setAttribute("data-theme",currentTheme),"dark"===currentTheme)){const e=themeToggle.previousElementSibling;themeToggle.checked=!0,e.classList.replace("fa-moon","fa-sun"),darkTheme=!0}const getSurahs=async()=>{const e=await fetch("https://api.quran.sutanlab.id/surah/");showLoader();const a=await e.json(),t=await a.data;showSurahs(t),hideLoader()};getSurahs();const showSurahs=e=>{for(let a in e)surahsContainer.innerHTML+=`<div class="surah flex shadow" onclick="showSurah(${e[a].number})">\n             <p class="number">${e[a].number}</p>\n             <div>\n              <h3 class="name">${e[a].name.transliteration.id}</h3>\n               <p class="desc text-gray">${e[a].name.translation.id} â€¢ ${e[a].numberOfVerses} ayat</p>\n             </div>\n           </div>`},showSurah=e=>{showLoader(),fetch(`https://api.quran.sutanlab.id/surah/${e}`).then(e=>e.json()).then(e=>{getSurah(e.data),hideLoader()}),surahPage.classList.add("active")},getSurah=e=>{let a;for(document.body.style.overflowY="hidden",mainNav.innerHTML=`\n         <li onclick="closeSurah()"><i class="far fa-chevron-left"></i></li>\n         <li class="logo">${e.name.transliteration.id}</li>\n         <li class="far fa-play toggle" onclick="toggleAudios(this)" data-number="${e.number}"></li>\n         `,a=1===e.number?1:0;a<e.verses.length;a++)versesContainer.innerHTML+=`<ul class="verse">\n         <li class="arab">${e.verses[a].text.arab}</li>\n         <li class="latin">${e.verses[a].number.inSurah}. ${e.verses[a].text.transliteration.en}</li>\n         <li class="means text-gray">${e.verses[a].translation.id}</li>\n         <li class="far fa-play toggle" onclick="toggleAudio(this)" data-audio="${e.verses[a].audio.primary}"></li>\n       </ul>`},toggleAudio=e=>{changeAudioToggles();let a=e.getAttribute("data-audio");e.classList.toggle("play"),audioEl.src=a,e.classList.contains("play")?(e.classList.replace("fa-play","fa-stop"),audioEl.play()):(e.classList.replace("fa-stop","fa-play"),audioEl.pause()),audioEl.onended=(()=>{e.classList.replace("fa-stop","fa-play")})},toggleAudios=e=>{changeAudioToggles();let a=e.getAttribute("data-number");e.classList.toggle("play"),fetch(`https://api.quran.sutanlab.id/surah/${a}`).then(e=>e.json()).then(a=>{playAudios(a.data.verses,e)})},playAudios=(e,a)=>{let t=1;audioEl.src=e[0].audio.primary,a.classList.contains("play")?(audioEl.play(),a.classList.replace("fa-play","fa-stop")):(audioEl.pause(),a.classList.replace("fa-stop","fa-play")),audioEl.onended=(()=>{a.classList.replace("fa-stop","fa-play"),audioEl.src=e[t++].audio.primary,audioEl.play(),a.classList.replace("fa-play","fa-stop")})},closeSurah=()=>{document.body.style.overflowY="auto",surahPage.classList.remove("active"),mainNav.innerHTML=`<li class="logo">Quranible</li>\n  <li class="theme-toggle">\n  <label for="check-toggle" class="far ${!0===darkTheme?"fa-sun":"fa-moon"} toggle"></label>\n  <input type="checkbox" class="check-toggle" id="check-toggle" onchange="setTheme(this)">\n  </li>`,setTimeout(()=>{versesContainer.innerHTML=""},500)},changeAudioToggles=()=>{document.querySelectorAll(".toggle").forEach(e=>{e.classList.replace("fa-stop","fa-play")})},setTheme=e=>{const a=e.previousElementSibling;e.checked?(a.classList.replace("fa-moon","fa-sun"),darkTheme=!0,document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark")):(a.classList.replace("fa-sun","fa-moon"),darkTheme=!1,document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light"))},showLoader=()=>{loader.classList.add("active")},hideLoader=()=>{loader.classList.remove("active")};